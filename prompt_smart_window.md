다음 요구사항을 만족하는 Flutter 앱을 생성하라. 언어는 한국어로 설명하고, 모든 소스 코드는 파일 경로 주석과 함께 “전체 내용”을 코드블록으로 제공하라. 실행 단계와 의존성 추가 명령어도 포함하라.

[하드웨어/백엔드 전제]
- 같은 Wi-Fi 내에서 ESP32와 통신한다.
- ESP32 개선본 펌웨어의 HTTP 엔드포인트:
  1) GET /data  -> application/json
     예시 스키마:
     {
       "temp": number,     // ℃
       "hum": number,      // %
       "pm25": number,     // μg/m³
       "bug": boolean,     // 벌레 감지 상태
       "servo": number     // 현재 서보 각도
     }
  2) GET /bugOn  -> application/json: {"ok":true,"bug":true,"msg":"..."}
  3) GET /bugOff -> application/json: {"ok":true,"bug":false,"msg":"..."}
- /data 응답은 매 호출마다 최신 값이 오며, 캐시 방지 헤더가 설정되어 있다.

[앱 목적/요구 기능]
- 상단 “종합 공기질” 배너: 매우좋음/좋음/나쁨/환기필수 중 한 문구를 크게 표시하고, 배경 색을 등급에 따라 다르게 표시한다.
  - 색 가이드(권장): 매우좋음=초록, 좋음=파랑/청록, 나쁨=주황, 환기필수=빨강.
  - 우측 보조 텍스트: “{온도}°C • {습도}% • PM2.5 {pm25}”.
  - 등급 산출 규칙(간단 지수):
    pmScore: PM2.5 → 0~15=0, 16~35=1, 36~75=2, 76~ =3
    tempScore: |T-22| ≤3 →0, 3<|T-22|≤6 →1, 6<|T-22| →2
    humScore: 40~60% →0, 30~39 또는 61~70 →1, 그 외 →2
    total = 0.6*pmScore + 0.25*tempScore + 0.15*humScore
    total <0.5 ⇒ 매우좋음
    0.5≤total<1.2 ⇒ 좋음
    1.2≤total<2.0 ⇒ 나쁨
    2.0≤total     ⇒ 환기필수
- 메인 카드 3개(아이콘+큰 숫자, 부드러운 갱신 애니메이션 적용):
  1) 온도(°C), 2) 습도(%), 3) PM2.5(μg/m³)
- 제어 버튼 2개:
  - “벌레 감지(닫기)” → GET /bugOn 호출
  - “해제(자동 복귀)” → GET /bugOff 호출
  - 결과 메시지를 스낵바/토스트 또는 상태 텍스트로 표시. 성공 시 로컬 bug 플래그를 최신 상태로 반영.
- 벌레 아이콘 표시:
  - 감지(true)일 때 아이콘 100% 불투명(밝게), 해제(false)일 때 40% 불투명(반투명).
  - 텍스트 “벌레 감지됨/감지 해제” 병기.
  - /data에 "bug"가 존재하므로 이를 **정본**으로 사용하고, /bugOn/off 호출 직후에는 /data 폴링 결과로 동기화한다.
- 자동 갱신 스위치:
  - 기본 ON. 1초 간격 폴링(GET /data, 타임아웃 3초).
  - OFF일 때는 수동 새로고침 버튼으로만 갱신.
  - “마지막 갱신 시각(HH:mm:ss)” 표기.
  - 3회 연속 실패 시 상단 배너를 회색 테마로 전환하고 “연결 안 됨” 문구 표시. 복구되면 원상복귀.
- 설정(톱니 아이콘):
  - baseUrl(예: http://192.168.0.23)을 입력/저장(shared_preferences).
  - “연결 테스트” 버튼을 제공: /data를 2초 타임아웃으로 호출, 성공 시 “연결 성공(온도 x°C, 습도 y%, PM z)” 토스트 후 저장 활성화, 실패 시 원인 표시.

[기술/구조 요구]
- Flutter, Material 3, null-safety.
- 의존성: http, shared_preferences (필수). 필요 시 intl(시간 포맷) 사용 가능.
- 코드 구조는 최소 2파일:
  - lib/services/api.dart : ApiClient (getData, bugOn, bugOff), 예외 래핑(ApiException)
  - lib/main.dart : UI, 상태관리(setState로 단순), WidgetsBindingObserver로 폴링 일시정지/재개
- 애니메이션: 값 변경 시 200~300ms Fade 또는 Scale(가볍게).
- 네트워크 예외/타임아웃/백오프: 타임아웃=3초, 연속 실패 카운팅.
- 문자열/라벨은 한국어. 아이콘 예: thermostat, water_drop, blur_on, pest_control.
- 테스트 편의:
  - baseUrl 미설정 시 설정 다이얼로그를 자동 팝업하거나 “설정해 주세요” 안내 화면을 먼저 보여라.

[iOS ATS 예외 안내]
- 개발 단계에서 http 로컬 접속을 허용하기 위한 Info.plist 예시 스니펫을 제공하라. production에서는 https 프록시/터널 권장이라는 주석 포함.

[출력 형식]
1) 프로젝트 생성 및 패키지 추가 명령어 (코드블록)
2) 파일 구조 트리 (간단)
3) 각 파일의 전체 코드 (경로 주석 포함하여 코드블록)
4) 실행 방법, iOS ATS 설정 방법
5) 간단한 수동 테스트 시나리오(버튼/스위치/설정/오류 케이스)

[수용 기준]
- 에뮬레이터에서 baseUrl 입력 후 즉시 /data 폴링으로 값이 표시되고, 상단 배너 등급이 계산되어 색상과 문구가 바뀌어야 한다.
- 벌레 아이콘은 /data의 bug=true/false에 따라 불투명도가 즉시 반영되어야 한다.
- /bugOn, /bugOff 호출 후 스낵바 메시지가 나오고, 이후 /data 폴링에서 bug 상태가 일치해야 한다.
- 자동갱신 OFF 시 타이머는 멈추고, 플로팅 새로고침 버튼으로만 갱신되어야 한다.
